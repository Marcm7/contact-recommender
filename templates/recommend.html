{% extends "base.html" %}

{% block content %}
  <h2>Find recommended doctors</h2>

  <form method="post">
    <label>City:
      <input type="text" name="city" placeholder="e.g. Beirut">
    </label><br><br>

    <label>Specialty:
      <input type="text" name="specialty" placeholder="e.g. Surgeon">
    </label><br><br>

    <label>Maximum fee (USD):
      <input type="number" name="max_fee" min="0" step="1">
    </label><br><br>

    <label>Minimum rating:
      <input type="number" name="min_rating" min="1" max="5" step="0.1">
    </label><br><br>

    <button type="submit">Search</button>
  </form>

  {% if filters %}
    <p style="margin-top: 16px; font-size: 0.9rem; color: #4b5563;">
      Showing results for:
      {% if filters.city %} <strong>City</strong> = {{ filters.city }};{% endif %}
      {% if filters.specialty %} <strong>Specialty</strong> = {{ filters.specialty }};{% endif %}
      {% if filters.max_fee is not none %} <strong>Max fee</strong> = {{ filters.max_fee }};{% endif %}
      {% if filters.min_rating is not none %} <strong>Min rating</strong> = {{ filters.min_rating }};{% endif %}
    </p>
  {% endif %}

  {% if doctors %}
    <table>
      <tr>
        <th>Name</th>
        <th>Specialty</th>
        <th>City</th>
        <th>Fee</th>
        <th>Rating</th>
        <th>Address</th>
      </tr>
      {% for d in doctors %}
      <tr>
        <td>{{ d.name }}</td>
        <td>{{ d.specialty }}</td>
        <td>{{ d.city }}</td>
        <td>{{ d.fee if d.fee is not none else '-' }}</td>
        <td>{{ d.rating if d.rating is not none else '-' }}</td>
        <td>{{ d.address or '-' }}</td>
      </tr>
      {% endfor %}
    </table>
  {% elif filters %}
    <p style="margin-top: 16px;">No doctors matched these filters.</p>
  {% endif %}
{% endblock %}
